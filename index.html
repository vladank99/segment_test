<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ú–æ–π –ú–∞–≥–∞–∑–∏–Ω</title>
  <meta name="description" content="–ü—Ä–æ—Å—Ç–æ–π –¥–µ–º–æ‚Äë–º–∞–≥–∞–∑–∏–Ω –Ω–∞ GitHub Pages: –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤, –∫–æ—Ä–∑–∏–Ω–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üõçÔ∏è</text></svg>">
  <style>
    :root{
      --bg:#0b0b10; --panel:#11121a; --card:#171827; --muted:#a7b0c0; --text:#e9ecf1; --accent:#7c86ff; --accent-2:#64d2ff; --danger:#ff6b6b;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:linear-gradient(180deg,#0b0b10,#101223);color:var(--text)}
    .container{max-width:1100px;margin-inline:auto;padding:24px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:16px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .brand h1{font-size:20px;margin:0}
    .toolbar{display:flex;gap:10px;align-items:center}
    input[type="search"]{background:var(--panel);border:1px solid #26283b;color:var(--text);padding:10px 12px;border-radius:12px;min-width:240px;outline:none}
    .btn{background:var(--accent);border:none;color:white;padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
    .btn.secondary{background:#26283b;color:var(--text)}
    .btn.danger{background:var(--danger)}

    .grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:16px}
    @media(min-width:600px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:900px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}

    .card{background:var(--card);border:1px solid #26283b;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .card img{width:100%;aspect-ratio:4/3;object-fit:cover}
    .card-body{padding:14px;display:flex;flex-direction:column;gap:8px}
    .price{font-weight:700}
    .tag{font-size:12px;color:var(--muted)}

    .layout{display:grid;grid-template-columns:1fr;gap:20px}
    @media(min-width:980px){.layout{grid-template-columns:2fr 1fr}}

    aside{position:sticky;top:16px;align-self:start;background:var(--panel);border:1px solid #26283b;border-radius:16px;padding:16px}
    aside h2{margin:0 0 8px;font-size:18px}
    .cart-empty{color:var(--muted);font-size:14px}
    .cart-item{display:grid;grid-template-columns:1fr auto auto;gap:10px;align-items:center;padding:10px 0;border-bottom:1px dashed #2a2d45}
    .cart-item:last-child{border-bottom:none}
    .qty{display:flex;align-items:center;gap:6px}
    .qty button{background:#26283b;border:none;color:var(--text);padding:4px 8px;border-radius:8px;cursor:pointer}
    .total{display:flex;justify-content:space-between;align-items:center;margin-top:12px;font-weight:700}
    footer{margin-top:32px;color:var(--muted);font-size:13px;text-align:center}
    .pill{background:#1e2136;color:#bfc7db;border-radius:999px;padding:4px 10px;font-size:12px}
    .filters{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .link{color:var(--accent-2);text-decoration:none}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <span class="pill">Demo</span>
        <h1>–ú–æ–π –ú–∞–≥–∞–∑–∏–Ω</h1>
      </div>
      <div class="toolbar">
        <input id="search" type="search" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤‚Ä¶" />
        <button id="clearCart" class="btn secondary" title="–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É">–û—á–∏—Å—Ç–∏—Ç—å</button>
      </div>
    </header>

    <div class="layout">
      <main>
        <div class="filters" style="margin:0 0 8px">
          <button data-filter="all" class="btn secondary">–í—Å–µ</button>
          <button data-filter="electronics" class="btn secondary">–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</button>
          <button data-filter="home" class="btn secondary">–î–æ–º</button>
          <button data-filter="toys" class="btn secondary">–ò–≥—Ä—É—à–∫–∏</button>
        </div>
        <section id="catalog" class="grid" aria-live="polite"></section>
      </main>

      <aside>
        <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
        <div id="cartList"></div>
        <div class="total"><span>–ò—Ç–æ–≥–æ</span><span id="cartTotal">0 ‚ÇΩ</span></div>
        <button id="checkout" class="btn" style="width:100%;margin-top:10px">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      </aside>
    </div>

    <footer>
      –°–¥–µ–ª–∞–Ω–æ –∫–∞–∫ –¥–µ–º–æ –¥–ª—è GitHub Pages. –ò–∑–º–µ–Ω—è–π—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ <code>index.html</code> ‚Üí –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è <code>PRODUCTS</code>.
      –û–ø–ª–∞—Ç–∞ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ ‚Äî —ç—Ç–æ —à–∞–±–ª–æ–Ω.
    </footer>
  </div>

  <script>
    // ====== –î–ê–ù–ù–´–ï –¢–û–í–ê–†–û–í ======
    const PRODUCTS = [
      { id: 'p1', title: '–ù–∞—É—à–Ω–∏–∫–∏ Breeze X', price: 2990, category: 'electronics', img: 'https://picsum.photos/seed/headphones/800/600', desc: '–õ—ë–≥–∫–∏–µ, —Å–∫–ª–∞–¥–Ω—ã–µ, 24—á —Ä–∞–±–æ—Ç—ã.' },
      { id: 'p2', title: '–õ–∞–º–ø–∞ Glow', price: 1590, category: 'home', img: 'https://picsum.photos/seed/lamp/800/600', desc: '–¢—ë–ø–ª—ã–π —Å–≤–µ—Ç –∏ USB‚Äë–ø–∏—Ç–∞–Ω–∏–µ.' },
      { id: 'p3', title: '–ò–≥—Ä–æ–≤–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä NeoPad', price: 4490, category: 'electronics', img: 'https://picsum.photos/seed/gamepad/800/600', desc: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ BT 5.0, –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞.' },
      { id: 'p4', title: '–ü–ª—é—à–µ–≤—ã–π —Ç–∏–≥—Ä', price: 990, category: 'toys', img: 'https://picsum.photos/seed/plush/800/600', desc: '–ì–∏–ø–æ–∞–ª–ª–µ—Ä–≥–µ–Ω–Ω—ã–π –Ω–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—å.' },
      { id: 'p5', title: '–ó–∞–≤–∞—Ä–Ω–∏–∫ TeaGo', price: 690, category: 'home', img: 'https://picsum.photos/seed/teago/800/600', desc: '–ù–µ—Ä–∂–∞–≤–µ—é—â–∞—è —Å—Ç–∞–ª—å, 300 –º–ª.' },
      { id: 'p6', title: '–ö–æ–ª–æ–Ω–∫–∞ Ripple Mini', price: 2190, category: 'electronics', img: 'https://picsum.photos/seed/speaker/800/600', desc: '–ì—Ä–æ–º–∫–∏–π –∑–≤—É–∫ –≤ –º–∞–ª–µ–Ω—å–∫–æ–º –∫–æ—Ä–ø—É—Å–µ.' }
    ];

    // ====== –†–ï–ù–î–ï–† –ö–ê–¢–ê–õ–û–ì–ê ======
    const $catalog = document.getElementById('catalog');
    const $search = document.getElementById('search');
    let currentFilter = 'all';

    function money(n){return new Intl.NumberFormat('ru-RU',{style:'currency',currency:'RUB',maximumFractionDigits:0}).format(n)}

    function productCard(p){
      const el = document.createElement('article');
      el.className = 'card';
      el.innerHTML = `
        <img src="${p.img}" alt="${p.title}">
        <div class="card-body">
          <div class="tag">${p.category}</div>
          <h3 style="margin:0 0 4px">${p.title}</h3>
          <p style="margin:0;color:var(--muted);font-size:14px">${p.desc}</p>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
            <span class="price">${money(p.price)}</span>
            <button class="btn" data-add="${p.id}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
          </div>
        </div>`;
      return el;
    }

    function renderCatalog(){
      const term = $search.value.trim().toLowerCase();
      $catalog.innerHTML = '';
      PRODUCTS.filter(p => (currentFilter==='all' || p.category===currentFilter) && (!term || p.title.toLowerCase().includes(term)))
        .forEach(p => $catalog.appendChild(productCard(p)));
    }

    document.querySelectorAll('[data-filter]').forEach(btn=>{
      btn.addEventListener('click',()=>{currentFilter = btn.dataset.filter; renderCatalog();})
    });
    $search.addEventListener('input', renderCatalog);

    // ====== –ö–û–†–ó–ò–ù–ê ======
    const $cartList = document.getElementById('cartList');
    const $cartTotal = document.getElementById('cartTotal');
    const $clearCart = document.getElementById('clearCart');
    const STORAGE_KEY = 'demo_shop_cart_v1';

    const Cart = {
      items: {},
      load(){ try{ this.items = JSON.parse(localStorage.getItem(STORAGE_KEY))||{} }catch{ this.items={} } },
      save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(this.items)) },
      add(id){ this.items[id] = (this.items[id]||0)+1; this.save(); renderCart(); },
      remove(id){ delete this.items[id]; this.save(); renderCart(); },
      change(id,delta){ const q=(this.items[id]||0)+delta; if(q<=0) this.remove(id); else { this.items[id]=q; this.save(); renderCart(); } },
      total(){ return Object.entries(this.items).reduce((sum,[id,q])=>{ const p=PRODUCTS.find(x=>x.id===id); return sum + (p?p.price*q:0) },0) }
    };

    function cartItemRow(p, qty){
      const row = document.createElement('div');
      row.className = 'cart-item';
      row.innerHTML = `
        <div>
          <div style="font-weight:600">${p.title}</div>
          <div class="tag">${money(p.price)} √ó ${qty}</div>
        </div>
        <div class="qty">
          <button data-dec="${p.id}" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å">‚àí</button>
          <span>${qty}</span>
          <button data-inc="${p.id}" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å">+</button>
        </div>
        <button class="btn danger" data-del="${p.id}">√ó</button>`;
      return row;
    }

    function renderCart(){
      $cartList.innerHTML = '';
      const ids = Object.keys(Cart.items);
      if(ids.length===0){
        $cartList.innerHTML = '<p class="cart-empty">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞.</p>';
      }else{
        ids.forEach(id=>{
          const p = PRODUCTS.find(x=>x.id===id); if(!p) return;
          $cartList.appendChild(cartItemRow(p, Cart.items[id]));
        });
      }
      $cartTotal.textContent = money(Cart.total());
    }

    // –°–ª—É—à–∞—Ç–µ–ª–∏ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞/–∫–æ—Ä–∑–∏–Ω—ã
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(t.matches('[data-add]')){ Cart.add(t.dataset.add) }
      if(t.matches('[data-del]')){ Cart.remove(t.dataset.del) }
      if(t.matches('[data-inc]')){ Cart.change(t.dataset.inc, +1) }
      if(t.matches('[data-dec]')){ Cart.change(t.dataset.dec, -1) }
    });

    $clearCart.addEventListener('click', ()=>{ Cart.items={}; Cart.save(); renderCart(); });

    // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–¥–µ–º–æ): —Ñ–æ—Ä–º–∏—Ä—É–µ–º –ø–∏—Å—å–º–æ
    document.getElementById('checkout').addEventListener('click', ()=>{
      const ids = Object.keys(Cart.items);
      if(ids.length===0){ alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'); return }
      const lines = ids.map(id=>{ const p=PRODUCTS.find(x=>x.id===id); return `${p.title} √ó ${Cart.items[id]} ‚Äî ${money(p.price*Cart.items[id])}`;});
      const body = encodeURIComponent('–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑:\n\n' + lines.join('\n') + `\n\n–ò—Ç–æ–≥–æ: ${money(Cart.total())}`);
      window.location.href = `mailto:shop@example.com?subject=–ó–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞&body=${body}`;
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    Cart.load();
    renderCatalog();
    renderCart();

    // ====== (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—Ä–∏–º–µ—Ä —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ ======
    // –ï—Å–ª–∏ –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É (Plausible/GoatCounter –∏ —Ç.–ø.), 
    // –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –∑–¥–µ—Å—å —Å–≤–æ–∏ —Å–æ–±—ã—Ç–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:
    // function track(evt, data){ console.log('[track]', evt, data) }
    // –ò –≤—ã–∑—ã–≤–∞—Ç—å: track('add_to_cart', {id})
  </script>
</body>
</html>

